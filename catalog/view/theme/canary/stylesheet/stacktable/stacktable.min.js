(function(a){a.fn.cardtable=function(b){var d=a.extend({},{id:"stacktable small-only",hideOriginal:!0,headIndex:0},b);headIndex=b&&b.headIndex?b.headIndex:0;return this.each(function(){$table=a(this);if(!$table.hasClass("stacktable")){var k=a(this).prop("class"),c=a("<div></div>");"undefined"!==typeof d.myClass&&c.addClass(d.myClass);var b="";$table.addClass("stacktable large-only");$caption=$table.find("caption").clone();$topRow=$table.find("tr").eq(0);$table.find("tbody tr").each(function(c,g){bodyMarkup=
    headMarkup="";tr_class=a(this).prop("class");a(this).find("td,th").each(function(b,d){""!==a(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',bodyMarkup=$topRow.find("td,th").eq(b).html()?bodyMarkup+('<td class="st-key">'+$table.find("thead th").eq(b).html()+"</td>"):bodyMarkup+'<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+a(this).prop("class")+'">'+a(this).html()+"</td>",bodyMarkup+="</tr>")});b+='<table class=" '+k+" "+d.id+'"><tbody>'+headMarkup+bodyMarkup+"</tbody></table>"});
    $table.find("tfoot tr td").each(function(c,g){""!==a.trim(a(g).text())&&(b+='<table class="'+k+" "+d.id+'"><tbody><tr><td>'+a(g).html()+"</td></tr></tbody></table>")});c.prepend($caption);c.append(a(b));$table.before(c);d.hideOriginal||$table.show()}})};a.fn.stacktable=function(b){var d=a.extend({},{id:"stacktable small-only",hideOriginal:!0,headIndex:0},b);headIndex=b&&b.headIndex?b.headIndex:0;return this.each(function(){var b=a(this).prop("class"),b=a('<table class="'+b+" "+d.id+'"><tbody></tbody></table>');
    "undefined"!==typeof d.myClass&&b.addClass(d.myClass);var c="";$table=a(this);$table.addClass("stacktable large-only");$caption=$table.find("caption").clone();$topRow=$table.find("tr").eq(0);$table.find("tr").each(function(b,d){bodyMarkup=headMarkup="";tr_class=a(this).prop("class");0===b?c+='<tr class=" '+tr_class+' "><th class="st-head-row st-head-row-main" colspan="2">'+a(this).find("th,td").eq(headIndex).html()+"</th></tr>":(a(this).find("td,th").each(function(b,d){b===headIndex?headMarkup='<tr class="'+
        tr_class+'"><th class="st-head-row" colspan="2">'+a(this).html()+"</th></tr>":""!==a(this).html()&&(bodyMarkup+='<tr class="'+tr_class+'">',bodyMarkup=$topRow.find("td,th").eq(b).html()?bodyMarkup+('<td class="st-key">'+$topRow.find("td,th").eq(b).html()+"</td>"):bodyMarkup+'<td class="st-key"></td>',bodyMarkup+='<td class="st-val '+a(this).prop("class")+'">'+a(this).html()+"</td>",bodyMarkup+="</tr>")}),c+=headMarkup+bodyMarkup)});b.prepend($caption);b.append(a(c));$table.before(b);d.hideOriginal||
    $table.show()})};a.fn.stackcolumns=function(b){var d=a.extend({},{id:"stacktable small-only",hideOriginal:!0},b);return this.each(function(){$table=a(this);var b=$table.find("tr").eq(0).find("td,th").length;if(!(3>b)){var c=a('<table class="'+d.id+'"></table>');"undefined"!==typeof d.myClass&&c.addClass(d.myClass);$table.addClass("stacktable large-only");for(var l=a("<tbody></tbody>"),e=1;e<b;)$table.find("tr").each(function(b,d){var c=a("<tr></tr>");0===b&&c.addClass("st-head-row st-head-row-main");
    first=a(this).find("td,th").eq(0).clone().addClass("st-key");var h=e;if(a(this).find("*[colspan]").length){var f=0;a(this).find("td,th").each(function(b,d){var c=a(this).attr("colspan");c?(c=parseInt(c,10),h-=c-1,f+c>e&&(h+=f+c-e-1),f+=c):f++;if(f>e)return!1})}second=a(this).find("td,th").eq(h).clone().addClass("st-val").removeAttr("colspan");c.append(first,second);l.append(c)}),++e;c.append(a(l));$table.before(c);d.hideOriginal||$table.show()}})}})(jQuery);